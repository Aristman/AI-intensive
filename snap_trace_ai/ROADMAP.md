# Roadmap: Snap Trace AI

Роли: 
- App Team (Mobile), 
- Backend Team (Kotlin), 
- Integrations Team (MCP), 
- DevOps/SRE.

--------------------------------
## Веха 0: Инициация (Неделя 0)
- Репозитории: три отдельных проекта (app, server, mcp).
- Выбор фреймворков: 
  - App: Flutter/React Native (final).
  - Server: Ktor/Spring Boot (final).
  - MCP: Node.js/Go/Kotlin (final).
- Подготовка OpenAPI черновика.

Артефакты:
- Арх диаграмма.
- OpenAPI v0 (черновик).

--------------------------------
## Веха 1: MVP сквозной поток (Недели 1–2)
- App:
  - Камера/галерея, форма промпта, отправка POST /v1/jobs.
  - Экран ленты (заглушка данных).
- Server:
  - Реализация POST /v1/jobs, очередь jobs.
  - Интеграция Yandex Art (dev конфиги), YandexGPT (dev).
  - S3 клиент (Yandex Cloud Object Storage) и сохранение медиа.
  - MCP клиент и вызов tg_send_photo.
  - GET /v1/jobs/{id}, GET /v1/feed (первые 10).
- MCP:
  - JSON‑RPC каркас, initialize/tools/list/tools/call.
  - Инструменты: tg_send_message, tg_send_photo, s3_put.
- DevOps:
  - Dev окружения, CI сборки, Docker образы.
  - Dev бакет в Yandex Object Storage.

Критерий: фото → промпт → публикация в Telegram → карточка в ленте с публичным S3 URL.

--------------------------------
## Веха 2: Надежность и наблюдаемость (Неделя 3)
- Ретраи и backoff в оркестраторе.
- Логи JSON с traceId/jobId.
- Rate limiting.
- Алёрты (ошибки MCP, S3, Yandex API).

--------------------------------
## Веха 3: UX и офлайн (Неделя 4)
- Кэш изображений и ленты.
- Оффлайн очередь отправок с ретраями.
- Улучшенные состояния (progress/failed/retry).

--------------------------------
## Веха 4: Безопасность и среды (Неделя 5)
- TLS и прокси.
- Секреты через Yandex Cloud Secrets/Lockbox.
- Разделение env: dev/stage/prod, ключи и бакеты.

--------------------------------
## Веха 5: Тестирование и качество (Неделя 6)
- Unit/интеграционные/контрактные тесты.
- Нагрузочные тесты (100 параллельных задач), целевые p95 установить по фактическим замерам.

--------------------------------
## Backlog и открытые вопросы
- Авторизация пользователей в МП (гости vs OAuth/Apple/Google).
- Модерация контента до публикации в Telegram (ручная/авто).
- Публичные ссылки S3 (Yandex Cloud Object Storage): публичный ACL vs подписанные URL vs CDN.
- Push‑уведомления о готовности результата (FCM/APNs).
- SLA/целевая производительность и стоимость (лимиты вызовов Yandex/Telegram/S3).
- Геокодирование (превращать lat/lon в placeName).
- Локализация: EN, другие языки.
- Политики хранения/удаления медиа (lifecycle rules, ретеншн) в Yandex Cloud.
- Анти‑абьюз (защита от NSFW/спама).
- UI улучшения: предпросмотр, авто‑сохранение черновика промпта.

--------------------------------
## Трекинг задач (примерные эпики)
- EPIC-APP-001: Камера+форма+отправка.
- EPIC-BE-001: Оркестрация Jobs (очередь, статусы).
- EPIC-MCP-001: JSON‑RPC каркас + инструменты.
- EPIC-DEVOPS-001: CI/CD, окружения, секреты.
- EPIC-QUALITY-001: Логи, метрики, тесты, нагрузка.
