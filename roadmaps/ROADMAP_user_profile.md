# Roadmap: Профиль пользователя

Цель: добавить функционал профиля пользователя в приложение, включая модель данных, экраны, модальные окна и интеграцию в существующие интерфейсы.

## Задачи (чекбоксы)

- [x] Модель профиля пользователя
  - [x] Определить `UserProfile` с полями: `name`, `role`
  - [x] Определить тип записи для списков: `ProfileEntry { title, description }`
  - [x] Добавить списки: `preferences: List<ProfileEntry>`, `exclusions: List<ProfileEntry>`
  - [x] Сериализация/десериализация (JSON) для сохранения/загрузки

- [x] Хранилище данных профиля
  - [x] Создать `UserProfileRepository` (локальное хранение, например `SharedPreferences`)
  - [x] Методы CRUD: получить/сохранить профиль, добавить/редактировать/удалить записи списков
  - [x] Провайдер состояния (`ChangeNotifier`/`ValueNotifier`) для обновления UI

- [ ] Интеграция с интерфейсами агентов
  - [ ] Вынести данные о пользователе из `sample_app/lib/agents/agent_interface.dart`
  - [x] Добавить в интерфейс(ы) поле/доступ к "Пользователь с профилем пользователя"
  - [x] Использовать данные профиля в реализациях там, где требуется (роль/предпочтения)
    - [x] `reasoning_agent.dart`: подмешивание профиля в контекст и системный промпт, отображение имени/роли на UI

- [x] Главный экран (`home_screen.dart`)
  - [x] Отображать имя пользователя в AppBar
  - [x] По клику на имя пользователя переходить на экран профиля

- [x] Экран профиля (`profile_screen.dart`)
  - [x] Отобразить поля: Имя, Роль
  - [x] Отобразить списки: Предпочтения и Исключения
  - [x] Кнопка "Добавить запись" для каждого списка
  - [x] Для каждой записи: кнопки "Редактировать" и "Удалить"
  - [x] Модальное окно для добавления/редактирования записи (форма: название, описание)
  - [x] Валидация формы и UX (кнопки, подсказки)

- [x] Стейт-менеджмент
  - [x] Связать UI с `UserProfileRepository` / провайдером
  - [x] Обеспечить обновление UI при изменениях (прослушивание `notifyListeners`)

- [ ] Тесты
  - [ ] Юнит-тесты модели и репозитория (CRUD, сериализация)
  - [ ] Widget-тесты модального окна и экрана профиля (добавление/редактирование/удаление)
  - [ ] Прогон тестов и фиксы (см. `.windsurf/rules/tests.md`)

- [ ] Документация
  - [ ] Обновить `README.md` (краткое описание профиля, где искать)
  - [ ] Поддерживать актуальность `ROADMAP.md` и этого файла (см. `.windsurf/rules/readme-roadmap.md`)
